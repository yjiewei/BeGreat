## 4.Java多线程里面的锁有哪些？公平锁/非公平锁/可重入锁/递归锁/自旋锁，谈谈你的理解，然后手写一个自旋锁

### 1.公平锁和非公平锁

公平锁：多个线程按照申请锁的顺序来获得锁，先来后到，加入等待队列，FIFO

非公平锁：多个线程获取锁的顺序并不是按照申请锁的顺序，后面的线程**有可能**先获得，在高并发的情况下，有可能会造成优先级反转和饥饿现象（一直被加塞）。它的优点是吞吐量比较大。

JUC的reentrantlock、synchronized默认是非公平锁，可以传参选择。



### 2.可重入锁（又称递归锁）Reentrantlock、synchronized

可重入锁：指同一线程外层函数获得锁之后，内层递归函数仍然能获取该锁的代码，在同一个线程在外层方法获取锁的时候，在进入内层方法会自动获得该锁。**即线程可以进入任何一个它已经拥有的锁所同步着的代码块。**

**作用：可以避免死锁。**